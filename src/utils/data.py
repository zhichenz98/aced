import numpy as np
import pandas as pd
import os


def load_case30(root='../data/case30_opf/data', topo=0, sigma='0.01', bias='0.00'):
    # G = np.genfromtxt(os.path.join(root, 'case30_topo0_g.csv'), delimiter=',')
    # B = np.genfromtxt(os.path.join(root, 'case30_topo0_b.csv'), delimiter=',')

    G = pd.read_csv(os.path.join(root, 'case30_topo0_g.csv'), header=None).values
    B = pd.read_csv(os.path.join(root, 'case30_topo0_b.csv'), header=None).values
    branches = pd.read_csv(os.path.join(root, 'case30_topo0_branches.csv'), header=None).values - 1  # start with 0 now

    # Need these tables...

    # columns = [
    #     "bus_i", "type", "Pd", "Qd", "Gs", "Bs", "area",
    #     "Vm", "Va", "baseKV", "zone", "Vmax", "Vmin"
    # ]
    # bus_data = [
    #     [1, 3, 0, 0, 0, 0, 1, 1, 0, 135, 1, 1.05, 0.95],
    #     [2, 2, 21.7, 12.7, 0, 0, 1, 1, 0, 135, 1, 1.1, 0.95],
    #     [3, 1, 2.4, 1.2, 0, 0, 1, 1, 0, 135, 1, 1.05, 0.95],
    #     [4, 1, 7.6, 1.6, 0, 0, 1, 1, 0, 135, 1, 1.05, 0.95],
    #     [5, 1, 0, 0, 0, 0.19, 1, 1, 0, 135, 1, 1.05, 0.95],
    #     [6, 1, 0, 0, 0, 0, 1, 1, 0, 135, 1, 1.05, 0.95],
    #     [7, 1, 22.8, 10.9, 0, 0, 1, 1, 0, 135, 1, 1.05, 0.95],
    #     [8, 1, 30, 30, 0, 0, 1, 1, 0, 135, 1, 1.05, 0.95],
    #     [9, 1, 0, 0, 0, 0, 1, 1, 0, 135, 1, 1.05, 0.95],
    #     [10, 1, 5.8, 2, 0, 0, 3, 1, 0, 135, 1, 1.05, 0.95],
    #     [11, 1, 0, 0, 0, 0, 1, 1, 0, 135, 1, 1.05, 0.95],
    #     [12, 1, 11.2, 7.5, 0, 0, 2, 1, 0, 135, 1, 1.05, 0.95],
    #     [13, 2, 0, 0, 0, 0, 2, 1, 0, 135, 1, 1.1, 0.95],
    #     [14, 1, 6.2, 1.6, 0, 0, 2, 1, 0, 135, 1, 1.05, 0.95],
    #     [15, 1, 8.2, 2.5, 0, 0, 2, 1, 0, 135, 1, 1.05, 0.95],
    #     [16, 1, 3.5, 1.8, 0, 0, 2, 1, 0, 135, 1, 1.05, 0.95],
    #     [17, 1, 9, 5.8, 0, 0, 2, 1, 0, 135, 1, 1.05, 0.95],
    #     [18, 1, 3.2, 0.9, 0, 0, 2, 1, 0, 135, 1, 1.05, 0.95],
    #     [19, 1, 9.5, 3.4, 0, 0, 2, 1, 0, 135, 1, 1.05, 0.95],
    #     [20, 1, 2.2, 0.7, 0, 0, 2, 1, 0, 135, 1, 1.05, 0.95],
    #     [21, 1, 17.5, 11.2, 0, 0, 3, 1, 0, 135, 1, 1.05, 0.95],
    #     [22, 2, 0, 0, 0, 0, 3, 1, 0, 135, 1, 1.1, 0.95],
    #     [23, 2, 3.2, 1.6, 0, 0, 2, 1, 0, 135, 1, 1.1, 0.95],
    #     [24, 1, 8.7, 6.7, 0, 0.04, 3, 1, 0, 135, 1, 1.05, 0.95],
    #     [25, 1, 0, 0, 0, 0, 3, 1, 0, 135, 1, 1.05, 0.95],
    #     [26, 1, 3.5, 2.3, 0, 0, 3, 1, 0, 135, 1, 1.05, 0.95],
    #     [27, 2, 0, 0, 0, 0, 3, 1, 0, 135, 1, 1.1, 0.95],
    #     [28, 1, 0, 0, 0, 0, 1, 1, 0, 135, 1, 1.05, 0.95],
    #     [29, 1, 2.4, 0.9, 0, 0, 3, 1, 0, 135, 1, 1.05, 0.95],
    #     [30, 1, 10.6, 1.9, 0, 0, 3, 1, 0, 135, 1, 1.05, 0.95],
    # ]
    #
    # df_bus = pd.DataFrame(bus_data, columns=columns)

    env = {
        'G': G,
        'B': B,
        'branches': branches,
    }

